{% extends 'base.html' %}

{% block title %}
    iBands | Аксесоари за Apple Watch, iPhone, Смарт часовници
{% endblock %}

{% block meta_description %}
    Каишки и аксесоари за Apple Watch и други смарт часовници, калъфи и протектори за iPhone, Samsung, iPad, AirTag, AirPods. Бърза доставка!
{% endblock %}

{% block content %}
    {% include 'partials/_breadcrumbs.html' %}

    <section class="middle">
        <div class="container">
            <!-- Page Title & Search -->
            <h1 class="fw-bold mb-5">Всички продукти (<span class="product_count">{{ products.paginator.count }}</span>)</h1>
            <div class="mb-5 d-flex justify-content-between align-items-center gap-2">
                <input type="text" class="form-control rounded search-filter" placeholder="Търси продукти..." name="search-filter" id="" />
                <button class="btn btn-primary rounded"><i class="fas fa-search"></i></button>
            </div>

            <div class="row">
                <!-- Sidebar Filters -->
                <div class="col-lg-3">
                    <!-- Category Filter -->
                    <div class="border rounded p-3 mb-3">
                        <h4>Категории</h4>
                        <ul class="list-unstyled">
                            {% for root in categories %}
                                <li>
                                    <div class="shop-filter-row">
                                        <div class="form-check mb-1">
                                            <input type="checkbox" class="form-check-input category-filter" value="{{ root.id }}" id="cat{{ root.id }}" />
                                            <label class="form-check-label fs-6" for="cat{{ root.id }}">{{ root.title }}</label>
                                        </div>
                                        {% if root.subcategories.all %}
                                            <button type="button" class="btn shop-filter-chevron shop-chevron-toggle" data-target="#subs{{ root.id }}">
                                                <span class="submenu-indicator"><span class="submenu-indicator-chevron"></span></span>
                                            </button>
                                        {% endif %}
                                    </div>
                                    {% if root.subcategories.all %}
                                        <ul class="subcategories ms-4" id="subs{{ root.id }}">
                                            {% for sub in root.subcategories.all %}
                                                <li>
                                                    <div class="shop-filter-row">
                                                        <div class="form-check mb-1">
                                                            <input type="checkbox" class="form-check-input category-filter" value="{{ sub.id }}" id="cat{{ sub.id }}" />
                                                            <label class="form-check-label fs-6" for="cat{{ sub.id }}">{{ sub.title }}</label>
                                                        </div>
                                                        {% if sub.subcategories.all %}
                                                            <button type="button" class="btn shop-filter-chevron shop-chevron-toggle" data-target="#subs{{ sub.id }}">
                                                                <span class="submenu-indicator"><span class="submenu-indicator-chevron"></span></span>
                                                            </button>
                                                        {% endif %}
                                                    </div>
                                                    {% if sub.subcategories.all %}
                                                        <ul class="subcategories ms-4" id="subs{{ sub.id }}">
                                                            {% for subsub in sub.subcategories.all %}
                                                                <li>
                                                                    <div class="form-check mb-1">
                                                                        <input type="checkbox" class="form-check-input category-filter" value="{{ subsub.id }}" id="cat{{ subsub.id }}" />
                                                                        <label class="form-check-label fs-6" for="cat{{ subsub.id }}">{{ subsub.title }}</label>
                                                                    </div>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    {% endif %}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                    <!-- Price Filter -->
                    <div class="border rounded p-3 mb-3">
                        <h4>Цена</h4>
                        <div class="shop-filter-offset">
                            {% for p in prices %}
                                <div class="mb-1 form-check">
                                    <input type="radio" name="price-filter" value="{{ p.id }}" class="form-check-input" id="{{ p.id }}" />
                                    <label class="form-check-label fs-6" for="{{ p.id }}">{{ p.value }}</label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <!-- Color Filter -->
                    <div class="border rounded p-3 mb-3">
                        <h4>Цвят</h4>
                        <div class="d-flex flex-wrap gap-2">
                            {% for group in color_groups %}
                                <div class="form-check d-flex align-items-center" title="{{ group.name_bg }}">
                                    <input type="checkbox" class="form-check-input colors-filter me-2" value="{{ group.id }}" id="colorGroup{{ group.id }}" />
                                    <label for="colorGroup{{ group.id }}" class="d-flex align-items-center gap-2 mb-0">
                                        <span class="rounded-circle color-swatch" data-hex="{{ group.hex_code }}"></span>
                                        <span class="fs-6">{{ group.name_bg }}</span>
                                    </label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <!-- Display Filter -->
                    <div class="border rounded p-3 mb-3">
                        <h4>Резултати на страница</h4>
                        <div class="shop-filter-offset">
                            {% for i in item_display %}
                                <div class="mb-1 form-check">
                                    <input type="radio" name="items-display" value="{{ i.id }}" class="form-check-input items-display" id="display{{ i.id }}" />
                                    <label class="form-check-label fs-6" for="display{{ i.id }}">{{ i.value }}</label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <!-- Reset Filters Button -->
                    <button class="btn btn-primary btn-sm rounded reset_shop_filter_btn">Премахни филтри <i class="fas fa-rotate ms-2"></i></button>
                </div>

                <!-- Products Section -->
                <div class="col-lg-9">
                    <div class="row align-items-center rows-products" id="products-list">
                        {% for product in products %}
                            {% include 'partials/_product_list.html' with product=product %}
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div id="pagination-block">
                {% include 'partials/_pagination.html' %}
            </div>
        </div>
    </section>
{% endblock %}
